---
applications:
  - name: notifications-admin
    buildpack: python_buildpack

    memory: 1G

    routes:
      - route: notifications.app.cloud.gov

    health-check-type: http
    health-check-http-endpoint: '/_status?simple=true'
    health-check-invocation-timeout: 10

    services:
      # - logit-ssl-syslog-drain
      # - notify-prometheus
      # - notify-splunk
      - notify-redis

    env:
      NOTIFY_APP_NAME: admin
      NOTIFY_LOG_PATH: /home/vcap/logs/app.log
      FLASK_APP: application.py
      NOTIFY_ENVIRONMENT: live

      # Credentials variables
      ADMIN_CLIENT_SECRET: ((ADMIN_CLIENT_SECRET))
      ADMIN_BASE_URL: notifications.app.cloud.gov
      API_HOST_NAME: notifications-api.app.cloud.gov
      DANGEROUS_SALT: ((DANGEROUS_SALT))
      SECRET_KEY: ((SECRET_KEY))
      ROUTE_SECRET_KEY_1: ((ROUTE_SECRET_KEY_1))
      ROUTE_SECRET_KEY_2: ((ROUTE_SECRET_KEY_2))
      METRICS_BASIC_AUTH_TOKEN: ((METRICS_BASIC_AUTH_TOKEN))

      AWS_ACCESS_KEY_ID: ((AWS_ACCESS_KEY_ID))
      AWS_SECRET_ACCESS_KEY: ((AWS_SECRET_ACCESS_KEY))

      ANTIVIRUS_API_HOST: ((ANTIVIRUS_API_HOST))
      ANTIVIRUS_API_KEY: ((ANTIVIRUS_API_KEY))

      ZENDESK_API_KEY: ((ZENDESK_API_KEY))

      TEMPLATE_PREVIEW_API_HOST: ((TEMPLATE_PREVIEW_API_HOST))
      TEMPLATE_PREVIEW_API_KEY: ((TEMPLATE_PREVIEW_API_KEY))

      NOTIFY_BILLING_DETAILS: []
