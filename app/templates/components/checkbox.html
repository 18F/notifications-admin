{% from "components/select-input.html" import select_nested %}

{% macro checkbox(
  field,
  hint=False,
  width='2-3',
  value='y'
) %}
  <div class="multiple-choice">
    {{ checkbox_input(field.id, field.name, field.data, value) }}
    <label for="{{ field.id }}">
      {{ field.label.text }}
      {% if hint %}
        <div class="hint">
          {{ hint }}
        </div>
      {% endif %}
    </label>
  </div>
{% endmacro %}


{% macro checkboxes_nested(field, child_map, hint=None, disable=[], option_hints={}, hide_legend=False) %}
  {{ select_nested(field, child_map, hint=None, disable=[], option_hints={}, hide_legend=False, input="checkbox") }}
{% endmacro %}


{% macro checkbox_input(id, name, data=None, value="y") %}
  <input
    id="{{ id }}" name="{{ name }}" type="checkbox" value="{{ value }}"
    {% if data %}
      checked
    {% endif %}
  >
{% endmacro %}

{% macro unlabelled_checkbox(id, name, data=None, value="y") %}
  <div class="multiple-choice">
    {{ checkbox_input(id, name, data, value) }}
    <label></label>
  </div>
{% endmacro %}

{% macro checkbox_group(
  legend,
  fields,
  set_value=False
) %}
  <fieldset class="form-group">
    <legend class="form-label">
      {{ legend }}
    </legend>
    {% if set_value %}
      {% for field in fields %}
        {{ checkbox(field, value=field.data) }}
      {% endfor %}
    {% endif %}
  </fieldset>
{% endmacro %}
