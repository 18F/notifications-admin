{% extends "views/dashboard/casework-base.html" %}

{% from "components/big-number.html" import big_number, big_number_with_status %}
{% from "components/show-more.html" import show_more %}
{% from "components/message-count-label.html" import message_count_label %}
{% from "components/table.html" import list_table, field, right_aligned_field_heading, hidden_field_heading %}
{% from "components/ajax-block.html" import ajax_block %}
{% from "components/textbox.html" import textbox %}
{% from "components/page-footer.html" import page_footer %}

{% block service_page_title %}
  Dashboard
{% endblock %}

{% block right_column %}
  <div style="padding: 40px 0 0 0">
    <form
      method="post"
      action="{{ url_for('.view_notifications', service_id=current_service.id, message_type=message_type) }}"
      class="grid-row"
    >
      <div class="column-three-quarters {% if message_type == 'sms' %}extra-tracking{% endif %}">
        {{ textbox(
          search_form.to,
          width='1-1',
          label='Search by {}'.format('email address' if message_type == 'email' else 'phone number')
        ) }}
      </div>
      <div class="column-one-quarter align-button-with-textbox">
        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
        <input type="submit" class="button" value="Search">
      </div>
    </form>
    {% include "views/activity/notifications.html" %}
  </div>
{% endblock %}
{% block left_column %}

  <div style="padding: 40px 30px 0 0">

  {{ template|string }}

  <div class="ajax-block-container">
    <p class="notification-status {{ 'sending'|format_notification_status_as_field_status }}">
      {% if 'sending'|format_notification_status_as_url %}
        <a href="{{ 'sending'|format_notification_status_as_url }}">
      {% endif %}
      {{ 'sending'|format_notification_status(
        'sms'
      ) }}
      {% if 'sending'|format_notification_status_as_url %}
        </a>
      {% endif %}
    </p>
  </div>
</div>

{% endblock %}
