{% from "components/banner.html" import banner, banner_wrapper %}

<div class="ajax-block-container">
  {% if verification_status == "pending" %}
    <p>
      We’re checking that ‘{{ reply_to_email_address }}’ is a real email address.
    </p>
    <p>
  <span class='loading-indicator'>This can take a minute </span>
    </p>

    <p>
      <a href="{{ url_for('main.service_verify_reply_to_address', service_id=service_id, notification_id=notification_id) + "?is_default={}".format(is_default) }}"">Refresh</a>
    </p>
  {% elif verification_status == "success" %}
    {{ banner("‘{}’ is ready to use".format(reply_to_email_address), type='default', with_tick=True) }}
  {% elif verification_status == "failure" %}
    {% call banner_wrapper(type='dangerous') %}
      <h2 class='banner-title' data-module="track-error" data-error-type="reply-to-email-not-working" data-error-label="{{ upload_id }}">
        There’s a problem with your reply-to address
      </h2>
      <p>
        We sent an email to ‘{{ reply_to_email_address }}’ but it wasn’t delivered.
      </p>
      <p>
        You can try again, or use a different address.
      </p>
    {% endcall %}
    <a href={{ url_for('main.service_add_email_reply_to', service_id=service_id) }}>Try again</a>
  {% endif %}
</div>
