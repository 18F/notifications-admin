{% extends "withnav_template.html" %}
{% from "components/page-header.html" import page_header %}
{% from "components/page-footer.html" import page_footer %}
{% from "components/textbox.html" import textbox %}
{% from "components/radios.html" import radio, conditional_radio_panel %}
{% from "components/select-input.html" import select_wrapper %}
{% from "components/form.html" import form_wrapper %}
{% from "components/radios/macro.njk" import govukRadios %}

{% block per_page_title %}
  Accept our data sharing and financial agreement
{% endblock %}

{% block maincolumn_content %}
  {{ page_header(
    'Accept our data sharing and financial agreement',
    back_link=url_for('main.request_to_go_live', service_id=current_service.id)
  ) }}
  {% call form_wrapper() %}
    {% set items = wtforms_option_fields_to_govuk_items(form.same_as_service_name) %}
    {% set conditional %}
      {{ textbox(form.name) }}
    {% endset %}
    {% for item in items %}
      {% if item["value"] == False %}
        {% set _ = item.update({ "conditional": { "html": conditional } }) %}
      {% endif %}
    {% endfor %}
    {{ govukRadios({
      "name": form.same_as_service_name.name,
      "fieldset": {
        "legend": {
          "text": form.same_as_service_name.label.text
        }
      },
      "items": items
    }) }}
    {{ page_footer('Continue') }}
  {% endcall %}
{% endblock %}
